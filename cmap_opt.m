function cmap_opt(hfig,evnt) %#ok

gd=guidata(hfig);

hf = figure('units','normalized','position',[0.253 0.521 0.145 0.104],...
    'menubar','none','name','Color Options',...
    'numbertitle','off','color',[0.925 0.914 0.847]);
uicontrol(hf,'style','text','units',...
    'normalized','position',[0.0707 0.233 0.374 0.18],...
    'string','Limits','backgroundcolor',[0.925 0.914 0.847]);
uicontrol(hf,'style','text','units','normalized',...
    'position',[0.037 0.639 0.407 0.158],'string','Colormap',...
    'backgroundcolor',[0.925 0.914 0.847]);

cmap.edit1 = uicontrol(hf,'style','edit','units','normalized',...
    'position',[0.502 0.233 0.2 0.211],'string',...
    sprintf('%0.1f',gd.cmap.clims(1)),...
    'backgroundcolor',[1 1 1]);

cmap.edit2 = uicontrol(hf,'style','edit','units','normalized',...
    'position',[0.71 0.233 0.2 0.211],'string',...
    sprintf('%0.1f',gd.cmap.clims(2)),...
    'backgroundcolor',[1 1 1]);

cmaps={'gray';'jet';'hot';'cool';'spring';'summer';...
    'autumn';'winter';'bone';'copper';'pink'};

cmap.popupmenu1 = uicontrol(hf,'style','popupmenu',...
    'units','normalized','position',[0.508 0.617 0.407 0.203],...
    'string',cmaps,'backgroundcolor',[1 1 1],...
    'value',gd.cmap.type);

uicontrol(hf,'style','pushbutton',...
    'units','normalized',...
    'position',[0.4 0.01 0.2 0.15],...
    'string','Done','callback',@cmapclose)

guidata(hf,cmap);

uiwait
cmap=guidata(hf);
gd.cmap=cmap;
guidata(hfig,gd);
close(hf)